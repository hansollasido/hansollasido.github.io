---
title:  "2022-09-06"
date:   2022-09-06 15:04:23
categories: [파란학기]
tags: [파란학기]
---

### 개강하고 첫 깃블로그

요즘 깃블로그가 뜸하다... 많이 바빠서 그런듯 ㅠㅠ

신경써서 자주 올려야겠다

### 파란학기

오늘 yolov5n을 사용해서 CCTV 영상 Object Detection을 진행해보았다.

**문제점**

- 영상 스케일이 너무 크다
- 너무 heavy 하다
- 불필요한 부분이 너무 많다

전처리가 정말 필요함!

---

CCTV 영상을 병렬적으로 실행해야하는 문제점이 발생하였다. 

이에 threading을 사용하여 동시에 object detection 하도록 만들었다. 

``` python

import threading
from utils.general import LOGGER

class exefile(threading.Thread):
    def __init__(self, filename):
        super().__init__()
        self.filepath = filename # filename 지정
        LOGGER.info(f"file : {self.filepath}")
        # execfile()

    def run(self):
        globals=None
        locals=None
        # LOGGER.info(f"file2 : {self.filepath}")
        # LOGGER.info(f"threading : {threading.current_thread().getName()}")
        if globals is None:
            globals = {}
        globals.update({
            "__file__": self.filepath,
            "__name__": "__main__",
        })
        with open(self.filepath, 'rb') as file:
            exec(compile(file.read(), self.filepath, 'exec'), globals, locals)
        # LOGGER.info(f"file : {self.filepath}")

# execute the file

LOGGER.info("exec.py execute!")

# procs = ["./detect.py","./detect2.py"]

if __name__ == '__main__':
    t1 = exefile("./detect.py")
    t1.start()


    t2 = exefile("./detect2.py")
    t2.start()

    t3 = exefile("./detect3.py")
    t3.start()


    t1.join()
    t2.join()
    t3.join()
    

```
