---
title:  "2022-10-01"
date:   2022-10-01 15:04:23
categories: [파란학기]
tags: [파란학기]
---

### 오랜만에 깃블로그

오늘 산학원에 가서 GPU 성능이 좋은 데스크탑으로 yolov5를 돌려보았다. 

확실히 너무 빨라서 좋았다....

![image.jpg](../../images/100101.jpg)

GPU 데스크탑은 처음이라서 GPU 사용하는 방법이 매우 까다로웠는데 
어찌저찌하다가 결국 됐다.

성능 진짜 좋다.

<video width="100%" height="100%" controls="controls">
  <source src="../../images/100102.mp4" type="video/mp4">
</video>

<video width="100%" height="100%" controls="controls">
  <source src="../../images/100103.mp4" type="video/mp4">
</video>



아래는 threading으로 병렬처리하여 object detection한 코드이다.

``` python

import threading
from utils.general import LOGGER

class exefile(threading.Thread):
    def __init__(self, filename):
        super().__init__()
        self.filepath = filename # filename 지정
        LOGGER.info(f"file : {self.filepath}")
        # execfile()

    def run(self):
        globals=None
        locals=None
        # LOGGER.info(f"file2 : {self.filepath}")
        # LOGGER.info(f"threading : {threading.current_thread().getName()}")
        if globals is None:
            globals = {}
        globals.update({
            "__file__": self.filepath,
            "__name__": "__main__",
        })
        with open(self.filepath, 'rb') as file:
            exec(compile(file.read(), self.filepath, 'exec'), globals, locals)
        # LOGGER.info(f"file : {self.filepath}")

# execute the file

LOGGER.info("exec.py execute!")

# procs = ["./detect.py","./detect2.py"]

if __name__ == '__main__':
    t1 = exefile("./detect.py")
    t1.start()


    t2 = exefile("./detect2.py")
    t2.start()

    t3 = exefile("./detect3.py")
    t3.start()


    t1.join()
    t2.join()
    t3.join()
    
```



